<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="task-management-container">
        <header class="row mb-3">
          <h1 class="mat-mdc-card-title col-9">Управління завданнями дронів</h1>
          <div class="actions-toolbar col-3">
            <button
              class="ms-auto"
              mat-raised-button
              color="primary"
              (click)="openCreateTaskDialog()"
            >
              Створити нове завдання
            </button>
          </div>
        </header>

        <mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="drone">
            <mat-header-cell *matHeaderCellDef>Дрон</mat-header-cell>
            <mat-cell *matCellDef="let task">
              {{ task.drone.name }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="field">
            <mat-header-cell *matHeaderCellDef>Поле</mat-header-cell>
            <mat-cell *matCellDef="let task">
              {{ task.field.name }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="operation">
            <mat-header-cell *matHeaderCellDef>Тип операції</mat-header-cell>
            <mat-cell *matCellDef="let task">
              <span [ngClass]="getTypeClass(task.operation)">
                {{ getTypeLabel(task.operation) }}
              </span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef>Статус</mat-header-cell>
            <mat-cell *matCellDef="let task">
              <span [ngClass]="getStatusClass(task.status)">
                {{ getStatusLabel(task.status) }}
              </span>
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="startTime">
            <mat-header-cell *matHeaderCellDef>Початок</mat-header-cell>
            <mat-cell *matCellDef="let task">
              {{ task.plannedDate | date : "dd.MM.yyyy HH:mm" }}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="period">
            <mat-header-cell *matHeaderCellDef>Тривалість</mat-header-cell>
            <mat-cell *matCellDef="let task">
              {{ task.period }} год.
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>Дії</mat-header-cell>
            <mat-cell *matCellDef="let task">
              <button mat-icon-button color="primary" (click)="openUpdateTaskDialog(task)">
                <mat-icon>edit</mat-icon>
              </button>
              <button
                mat-icon-button
                color="warn"
                (click)="openDeleteDialog(task)"
              >
                <mat-icon>delete</mat-icon>
              </button>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
        </mat-table>

      </div>
    </div>
  </div>
</div>
